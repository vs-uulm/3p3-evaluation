three_phase_protocol_implementation